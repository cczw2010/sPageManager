/** sPageManager页面栈管理库,适用于spa(simple page application)webapp页面切换管理，也可用于幻灯。
 * build by awen @71752352@qq.com
 * 1 所有页面包含在同一个页面容器里，页面容器的样式为:pt-main，沿用pt-前缀是为了尊重pageanimations库
 * 2 所有的页面样式名为：pt-page；内核不编辑页面的展现样式，请自根据app自定义，具体参考demo。
 */
!function(a){function k(a,b,c){var h,d=0,e=a,f=b;if(a in g){if(h=g[a],!(b in h))return!1;e=h[b][0],f=h[b][1],d=h[b][2]}else f="v"==b?"Bottom":"Right";return c&&(f=m(f)),[e,f,d]}function l(a,b,c){var h,d=0,e=a,f=b;if(a in g){if(h=g[a],!(b in h))return!1;e=h[b][3],f=h[b][4],d=h[b][5]}else f="v"==b?"Top":"Left";return c&&(f=m(f)),[e,f,d]}function m(a){var b="";switch(a){case"Top":b="Bottom";break;case"Bottom":b="Top";break;case"Left":b="Right";break;case"Right":b="Left"}return b}function n(b,c,d,e,f,g){var h=a(b),i="none"!=c&&c?"pt-page-"+c+e+d:"",j="Out"==d?!1:!0;if(0!=h.length){o(h),"none"!=c&&h.on("webkitAnimationEnd",function(){o(this),g&&g.call(this,d)}),f&&(i+=" pt-page-delay"+f);var k=i;j?(i+=" pt-page-current pt-page-top",k+=" pt-page-top"):k+=" pt-page-current",h.data("pt-animcname",k).addClass(i),"none"==c&&(o(h),g&&g.call(h[0],d))}}function o(b){var c=a(b),d=c.data("pt-animcname")||!1;d&&c.off("webkitAnimationEnd").off("webkitTransitionEnd").removeData("pt-animcname").removeClass(d)}function p(a,b,c,d,f,h,i,j){return a&&d&&i&&b&&c&&-1!=e.indexOf(c)&&h&&-1!=e.indexOf(h)?(a in g||(g[a]={},e.push(a)),g[a][b]=[c,d,f||0,h,i,j||0],!0):!1}var b=null,c=null,d=[],e=["none","move","moveFade","flip","rotateCube","rotatePush","rotateFold","rotateCarousel"],f="none",g={rotateCube:{v:["rotateCube","Top",0,"rotateCube","Top",0],h:["rotateCube","Left",0,"rotateCube","Left",0]},rotateCarousel:{v:["rotateCarousel","Top",0,"rotateCarousel","Top",0],h:["rotateCarousel","Left",0,"rotateCarousel","Left",0]},flip:{v:["flip","Bottom",500,"flip","Top",0],h:["flip","Right",500,"flip","Left",0]}},h=["v","h"],i="h",j=function(a,b,c){this.sel=a,this.hash=location.hash,this.singleInstance=!1,this.anim=b,this.distance=c};window.sPageManager={init:function(a,b){a&&e.indexOf(a)>-1&&(f=a),b&&h.indexOf(b)>-1&&(i=b)},show:function(g,m,o,p){var u,q="undefined"!=typeof m&&e.indexOf(m)>-1?m:f,r="undefined"!=typeof o&&h.indexOf(o)>-1?o:i,s=k(q,r),t=l(q,r);return 0==a(g).length?!1:s&&t?(u=new j(g,q,r),d.push(u),c&&n(c.sel,t[0],"Out",t[1],t[2]),b=c,c=u,n(g,s[0],"In",s[1],s[2],p),c):!1},anim:n,extend:p,back:function(a){var e,f;if(!c)return null;if(e=l(c.anim,c.distance,!0),f=k(c.anim,c.distance,!0),!f||!e)return null;(!a||b)&&(n(c.sel,e[0],"Out",e[1],e[2]),d.pop()),b?(n(b.sel,f[0],"In",f[1],f[2]),c=b):a||(c=null);var g=d.length;return b=g>1?d[g-2]:null,c},getSupportAnims:function(){return e},getStack:function(){return d},getCurrentPage:function(){return c},getLastPage:function(){return b}}}(jQuery);