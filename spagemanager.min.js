/** sPageManager页面栈管理库,适用于spa(simple page application)webapp页面切换管理，也可用于幻灯。
 * build by awen @71752352@qq.com
 * 1 所有页面包含在同一个页面容器里，页面容器的样式为:pt-main，沿用pt-前缀是为了尊重pageanimations库
 * 2 所有的页面样式名为：pt-page；内核不编辑页面的展现样式，请自根据app自定义，具体参考demo。
 */
!function(a){function k(a,b,c){var d="flip"==a?500:0;return g.indexOf(a)>-1?l(a,b,c):(b=c?"v"==b?"Top":"Left":"v"==b?"Bottom":"Right",[a,b,d])}function l(a,b,c){return b=c?"v"==b?"Bottom":"Right":"v"==b?"Top":"Left",[a,b,0]}function m(b,c,d,e,f){var g=a(b),h="none"!=c&&c?"pt-page-"+c+e+d:"",i="Out"==d?!1:!0;if(0!=g.length){n(g),"none"!=c&&(g.on("webkitAnimationEnd",function(){n(this)}),g.on("webkitTransitionEnd",function(){n(this)})),f&&(h+=" pt-page-delay"+f);var j=h;i?(h+=" pt-page-current pt-page-top",j+=" pt-page-top"):j+=" pt-page-current",g.data("pt-animcname",j).addClass(h),"none"==c&&n(g)}}function n(b){var c=a(b),d=c.data("pt-animcname")||!1;d&&c.off("webkitAnimationEnd").off("webkitTransitionEnd").removeData("pt-animcname").removeClass(d)}var b=null,c=null,d=[],e=["none","move","moveFade","flip","rotateCube","rotatePush","rotateFold","rotateCarousel"],f="none",g=["rotateCube","rotateCarousel"],h=["v","h"],i="h",j=function(a,b,c){this.sel=a,this.hash=location.hash,this.singleInstance=!1,this.anim="undefined"!=typeof b&&e.indexOf(b)>-1?b:f,this.distance="undefined"!=typeof c&&h.indexOf(c)>-1?c:i};window.sPageManager={init:function(a,b){a&&e.indexOf(a)>-1&&(f=a),b&&h.indexOf(b)>-1&&(i=b)},show:function(e,f,g){var n,h=k(f,g),i=l(f,g);return 0==a(e).length?!1:(n=new j(e,f,g),d.push(n),c&&m(c.sel,i[0],"Out",i[1],i[2]),b=c,c=n,m(e,h[0],"In",h[1],h[2]),c)},anim:m,back:function(a){var e,f;if(!c)return null;e=l(c.anim,c.distance,!0),f=k(c.anim,c.distance,!0),(!a||b)&&(m(c.sel,e[0],"Out",e[1],e[2]),d.pop()),b?(m(b.sel,f[0],"In",f[1],f[2]),c=b):a||(c=null);var g=d.length;return b=g>1?d[g-2]:null,c},getSupportAnims:function(){return e},getStack:function(){return d},getCurrentPage:function(){return c},getLastPage:function(){return b}}}(jQuery);